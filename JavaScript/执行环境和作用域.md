# 执行环境

执行环境：定义了的变量或函数有权访问的其他数据，决定了它们各自的行为，每个执行环境都有一个与之关联的变量对象，环境中定义的所有变量和函数都保存在这个对象中。每个函数都有自己的执行环境，当执行流进入一个函数时，函数的环境就被推入一个环境栈中，当函数执行完毕后，栈将其环境弹出，把控制权返回给之前的执行环境。

全局执行环境：是最外围的一个执行环境，在不同宿主环境下，全局执行环境也不同，如在浏览器中全局执行环境是`window`对象，当某个执行环境中的所有代码执行完毕后，该环境被销毁，保存在其中的变量与函数定义也随之销毁，如关闭浏览器。

# 声明变量

+ 无`var`声明的变量，会被添加到全局环境。
+ 使用`var`声明的变量，会被自动添加到最近的环境中。
+ 使用`let`声明的变量，会在花括号内的函数被执行完后销毁。

# 作用域

+ 全局作用域可以在代码中的任何地方都能被访问。
+ 局部作用域一般只在固定的代码片段内可以访问得到。

# 作用域链

全局作用域和局部作用域中变量（函数参数也被当作变量看待）的访问权限，其实是由作用域链决定的。每次进入一个新的执行环境，都会创建一个用于搜索变量和函数的作用域链，它能保证变量、函数的有序访问。

作用域链的最前端始终是当前执行的代码所在环境的变量对象（如果该环境是函数，则将其活动对象作为变量对象），下一个变量对象来自包含环境（包含当前运行环境的环境），下一个变量对象来自包含环境的包含环境，依次往上，直到全局执行环境的变量对象。全局执行环境的变量对象始终是作用域链中的最后一个对象。

当在某个环境中读写一个标识符时，搜索过程从作用域链前端开始，向上逐级查询匹配的标识符。即局部环境中查找→全局环境中查找→未找到则说明该变量未声明。

某些语句可以在作用域链的前端临时增加一个变量对象，该变量对象会在代码执行后被移除。

+ try-catch语句：其中的`catch`语句能创建一个新的变量对象，其中包含被抛出的错误对象的声明。
+ with语句：会将指定的对象添加到作用域链中。

# 垃圾收集

js具有自动垃圾收集机制，所需内存的分配以及无用的内存回收皆为自动化管理。

垃圾收集器会周期性地找出不再继续使用地变量，然后释放其占用的内存。

可以给一个变量赋值`null`以解除引用，手动释放其内存。

